<div class="wrapper">
  <div class="container mt-4">
    <div class="row mb-3">
      <div class="col-12 d-flex justify-content-between align-items-center">
        <h2 *ngIf="!editar">Registrar médico</h2>
        <h2 *ngIf="editar">Editar médico</h2>
        <button class="btn btn-secondary" type="button" (click)="regresar()">
          Regresar
        </button>
      </div>
    </div>

    <!-- ÚNICO FORMULARIO -->
    <form (ngSubmit)="guardarDoctor()" novalidate>

      <!-- CÉDULA / NOMBRE / APELLIDO -->
      <div class="row mb-3">
        <div class="col-md-4 mb-3">
          <label>Cédula</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="doctor.cedula"
            name="cedula"
          />
          <small class="text-danger" *ngIf="errores.cedula">
            {{ errores.cedula }}
          </small>
        </div>

        <div class="col-md-4 mb-3">
          <label>Nombre</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="doctor.first_name"
            name="first_name"
          />
          <small class="text-danger" *ngIf="errores.first_name">
            {{ errores.first_name }}
          </small>
        </div>

        <div class="col-md-4 mb-3">
          <label>Apellido</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="doctor.last_name"
            name="last_name"
          />
          <small class="text-danger" *ngIf="errores.last_name">
            {{ errores.last_name }}
          </small>
        </div>
      </div>

      <!-- EMAIL / TELÉFONO / ESPECIALIDAD -->
      <div class="row mb-3">
        <div class="col-md-4 mb-3">
          <label>Email</label>
          <input
            type="email"
            class="form-control"
            [(ngModel)]="doctor.email"
            name="email"
          />
          <small class="text-danger" *ngIf="errores.email">
            {{ errores.email }}
          </small>
        </div>

        <div class="col-md-4 mb-3">
          <label>Teléfono</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="doctor.telefono"
            name="telefono"
          />
          <small class="text-danger" *ngIf="errores.telefono">
            {{ errores.telefono }}
          </small>
        </div>

        <div class="col-md-4 mb-3">
          <label>Especialidad</label>
          <select
            class="form-select"
            [(ngModel)]="doctor.especialidad"
            name="especialidad"
          >
            <option [ngValue]="null">Sin asignar</option>
            <option *ngFor="let esp of especialidades" [ngValue]="esp.id">
              {{ esp.nombre }}
            </option>
          </select>
          <small class="text-danger" *ngIf="errores.especialidad">
            {{ errores.especialidad }}
          </small>
        </div>
      </div>

      <!-- ACTIVO -->
      <div class="row mb-3">
        <div class="col-md-4 mb-3">
          <label>Activo</label>
          <select
            class="form-select"
            [(ngModel)]="doctor.activo"
            name="activo"
          >
            <option [ngValue]="true">Sí</option>
            <option [ngValue]="false">No</option>
          </select>
        </div>
      </div>

      <!-- CONTRASEÑA (solo al crear) -->
      <div class="row mb-3" *ngIf="!editar">
        <div class="col-md-4 mb-3">
          <label>Contraseña</label>
          <input
            type="password"
            class="form-control"
            [(ngModel)]="doctor.password"
            name="password"
          />
          <small class="text-danger" *ngIf="errores.password">
            {{ errores.password }}
          </small>
        </div>

        <div class="col-md-4 mb-3">
          <label>Confirmar contraseña</label>
          <input
            type="password"
            class="form-control"
            [(ngModel)]="doctor.confirmar_password"
            name="confirmar_password"
          />
          <small class="text-danger" *ngIf="errores.confirmar_password">
            {{ errores.confirmar_password }}
          </small>
        </div>
      </div>

      <!-- BOTÓN -->
      <div class="row mb-5">
        <div class="col-12 text-end">
          <button type="submit" class="btn btn-primary">
            {{ editar ? 'Actualizar médico' : 'Registrar médico' }}
          </button>
        </div>
      </div>

    </form>
  </div>
</div>
